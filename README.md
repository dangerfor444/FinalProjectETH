# Система Оплаты Счетов на Базе Ethereum

## Описание проекта

Этот проект представляет собой распределенное приложение (dApp) для создания и оплаты счетов на платформе Ethereum. Он построен на базе проекта [Scaffold-ETH](https://scaffold-eth.com/) и использует контракт для управления инвойсами. Пользователи могут создавать инвойсы, отправлять на них деньги и отслеживать состояние своих транзакций.

---

## Как это работает

### Смарт контракт (YourContract.sol)

Контракт реализует следующие функции:

- **`createInvoice`**: Создает новый инвойс, принимая адрес получателя, описание и сумму в wei. При создании инвойса генерируется уникальный ID.
- **`payInvoice`**: Позволяет пользователю оплатить инвойс, отправив соответствующую сумму на адрес получателя. Оплата возможна только при условии, что инвойс еще не был оплачен и сумма платежа совпадает с указанной.
- **`getInvoice`**: Возвращает информацию о конкретном инвойсе, включая статус оплаты.
  
Подробные особенности смарт-контракта:
- Контракт хранит информацию о всех инвойсах, включая статус их оплаты.
- Каждое создание инвойса усиливается событием **`InvoiceCreated`**, позволяя следить за всеми транзакциями через события.
- Оплата инвойса управляется с помощью события **`InvoicePaid`**, что обеспечивает отслеживание и управление транзакциями.

---

### Фронтенд (page.tsx)

Фронтенд представляет собой интерфейс для взаимодействия со смарт-контрактом. Пользовательский опыт включает:

- Подключение к кошельку (например, MetaMask).
- Создание инвойсов с указанием получателя, суммы и описания.
- Оплата созданных инвойсов.(Успеншная опалата проводится только в том случае, если вводиться созданное ID инвойса для оплаты и точная сумма платежа)
- Отображение списка созданных и оплаченных инвойсов.

---

## Как запустить проект

### 1. Установите зависимости
yarn install

### 2. Запустите локальную сеть Ethereum
yarn chain

### 3. Разверните смарт-контракт
yarn deploy

### 4. Запустите фронтенд
yarn start

### 5. Откройте приложение
http://localhost:3000

---

## Тестирование

### 1. Запуск тестов
Проект включает в себя тесты для проверки функциональности смарт-контракта(packages/hardhat/test). Тесты написаны с использованием библиотеки Chai и проводятся с использованием Ethereum Hardhat. Они содержат проверки развертывания контракта, создания инвойсов, оплаты и обработки ошибок.
Для проверки работы смарт-контракта выполните:
yarn hardhat:test

### 2. Ожидаемые результаты
- Успешное развёртывание конракта(убедиться, что контракт инициализируется с нулевым количеством инвойсов).
- Успешное создание инвойса: проверить правильность создания инвойса и сохранение его деталей.
- Успешная оплата инвойса: тестирование успешной оплаты, а также проверка обработки ошибок, таких как недостаточная сумма или попытка повторной оплаты.

---

